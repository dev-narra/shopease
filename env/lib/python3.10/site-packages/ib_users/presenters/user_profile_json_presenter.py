from typing import List

from ib_users.interactors.presenters.user_profile_presenter import \
    UserProfilePresenter
from ib_users.interactors.user_profile_interactor import GetUserProfileDTO


class UserProfileJSONPresenter(UserProfilePresenter):

    def _get_user_profile_dict_from_dto(self, user_profile: GetUserProfileDTO):
        return {
            "name": user_profile.name,
            "gender": user_profile.gender,
            "dob": user_profile.dob,
            "profile_pic_url": user_profile.profile_pic_url,
            "phone_number": user_profile.phone_number,
            "country_code": user_profile.country_code,
            "email": user_profile.email,
            "language_preference": user_profile.language_preference,
            "is_phone_number_verified": user_profile.is_phone_number_verified,
            "is_email_verified": user_profile.is_email_verified,
            "user_id": user_profile.user_id,
            "iso_country_code": user_profile.iso_country_code,
            "last_name": user_profile.last_name,
            "cover_page_url": user_profile.cover_page_url,
            "is_active": user_profile.is_active,
        }

    def get_user_profile(self, user_profile: GetUserProfileDTO):
        return self._get_user_profile_dict_from_dto(user_profile)

    def get_user_profiles(self, user_profiles: List[GetUserProfileDTO]):
        return [
            self._get_user_profile_dict_from_dto(user_profile)
            for user_profile in user_profiles
        ]

    def update_user_profile(self, user_profile: GetUserProfileDTO):
        return self._get_user_profile_dict_from_dto(user_profile)

    def generate_user_code(self, user_code: str):
        return {
            "user_code": user_code
        }
