from django.core.exceptions import ValidationError

from ib_users.exceptions.custom_exception_constants import INVALID_EMAIL
from ib_users.validators.base_validator import \
    CustomException, BaseValidator


class EmailValidator(BaseValidator):

    @classmethod
    def validate(cls, value):
        try:
            from django.core.validators import EmailValidator

            email_validator = EmailValidator(
                message=INVALID_EMAIL.message,
                code=INVALID_EMAIL.code)
            email_validator(value)
        except ValidationError as ve:
            raise CustomException.from_exception_message_and_code(
                ve.message, ve.code
            )
