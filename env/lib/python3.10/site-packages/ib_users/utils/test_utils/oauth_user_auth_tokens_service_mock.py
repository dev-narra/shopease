from typing import List

from ib_users.interactors.third_party.user_tokens_generator import \
    UserAuthTokensGenerator, UserAuthTokensDTO


class OAuthUserAuthTokensServiceMock(UserAuthTokensGenerator):
    def create_user_auth_tokens(self, user_id, expiry_in_seconds=None, application_id =None) -> UserAuthTokensDTO:
        from datetime import datetime
        return UserAuthTokensDTO(
            user_id="user_id",
            access_token="access_token",
            refresh_token="refresh_token",
            expires_in=datetime(year=2199, month=1, day=2)
        )

    def get_updated_user_auth_tokens(self, refresh_token) -> UserAuthTokensDTO:
        from datetime import datetime
        return UserAuthTokensDTO(
            user_id="user_id",
            access_token="updated_access_token",
            refresh_token="updated_refresh_token",
            expires_in=datetime(year=2199, month=1, day=2)
        )

    def expire_all_auth_tokens_related_to_given_access_token(
            self, access_token):
        pass

    def expire_all_auth_tokens_related_to_given_list_of_access_tokens(
            self, access_tokens: List[str]):
        pass

    def get_user_id_for_access_token(self, access_token):
        return "09fd176e-1c0c-44fb-a3c6-e9ef72963723"

    def get_all_access_tokens_related_to_user(self, user_id, ignore_application_ids: List[str] = None,
            select_application_ids: List[str] = None):
        from ib_users.interactors.storages.oauth2_storage import AccessTokensDTO

        return AccessTokensDTO(access_tokens=[])
